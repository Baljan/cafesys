{% extends "site_base.html" %}

{% load i18n %}
{% load humanize %}

{% block head_title %}{% trans "Accounting" %}{% endblock %}
{% block extra_head %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/accounting.css" />
{% endblock %}

{% block subnav %}
<ul>
    <li><a href="{% url accounting.views.index %}">{% trans "My Status" %}</a></li>
    {#<li><a href="{% url accounting.views.order_history %}">{% trans "My Order History" %}</a></li>#}
    <li><a href="{% url accounting.views.price_list %}">{% trans "Price List" %}</a></li>
    {% if is_board_member %}
    <li><a href="{% url stats.views.index %}">{% trans "Statistics" %}</a></li>
    {% endif %}
</ul>
{% endblock %}

{% block body_class %}accounting{% endblock %}

{% block extra_body %}
    <script type="text/javascript">
        {% if is_regular %}
            IS_REGULAR=true;
        {% else %}
            IS_REGULAR=false;
        {% endif %}
        {% if is_worker %}
            IS_WORKER=true;
        {% else %}
            IS_WORKER=false;
        {% endif %}
        {% if is_board_member %}
            IS_BOARD_MEMBER=true;
        {% else %}
            IS_BOARD_MEMBER=false;
        {% endif %}
    </script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/stats.js"></script> 
{% endblock %}


{% block body %}
    <h1>{% trans "Status for" %} {{ student.liu_id }}</h1>

    <div class="widget"> 
        <h2>
            {% trans "Balance" %} 
        </h2>
        {# "intcomma" could be used but it is i18n unfriendly (we separate with spaces, not commas, in Sweden #}
        {% if student.is_board_member %}
            <div class="balance good">
                {{ balance }} SEK<br />
                <small>{% trans "+ board member privileges" %}</small>
            </div>
        {% else %}
            <div class="balance {% if positive_balance %}good{% else %}bad{% endif %}">
                {{ balance }} SEK
                {% if student.is_worker %}
                    <br /><small>{% trans "+ worker privileges" %}</small>
                {% endif %}
            </div>
        {% endif %}

        <form method="post" action="">{% csrf_token %}
            <input style="width:70%" name="balance-code" type="text" class="textinput textInput" />
            <input style="width:24%" type="submit" value="{% trans "Refill" %} &raquo;" />
        </form>

        <p>
        {% trans "Value cards are sold at the caf√©." %}
        </p>
    </div>
    
    <div class="widget"> 
        <h2>
            {% trans "Orders" %} 
        </h2>
        {% include "accounting/history_widget.html" %}
        <a href="{% url accounting.views.order_history %}">{% trans "show all" %}</a>
    </div>
{% endblock %}
